yiiframework.com Website
========================

This project contains the source code for the yiiframework.com Website.


## INSTALLATION

Before you start, make sure you have installed [composer](https://getcomposer.org/) and [Node.js](http://nodejs.org/).
 
```
# clone the project
git clone git@github.com:qiangxue/yiiframework.com.git

cd yiiframework.com

# install the composer asset plugin globally, if you haven't done so before
composer global require "fxp/composer-asset-plugin:1.0.0-beta4

# install the dependent composer packages
composer update

# install grunt-cli globally if you haven't done so before
npm install -g grunt-cli

# install dependent NPM modules
npm install

# initialize the application, choose "development"
./init

# clone yii repositories for generating API and guide documentation
cd data
git clone git@github.com:yiisoft/yii.git yii-1.1
git clone git@github.com:yiisoft/yii2.git yii-2.0

# build guide and API documentation (will be put in cron job on production)
cd ..
./yii api 2.0 --interactive=0
./yii guide 2.0 --interactive=0
./yii api 1.1 --interactive=0
./yii guide 1.1 --interactive=0
```


### Web Server Setup

Define a host name `local.yiiframework.com` that points to `localhost`.

Define a virtual host of the Web server for `local.yiiframework.com` which uses `yiiframework.com/web`
as the document root.

If you are using Apache, add the following configuration for the `yiiframework.com/web` folder to hide the
entry script:

```
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php
```


## DIRECTORY STRUCTURE

      assets/             contains LESS and JavaScript files
      commands/           contains console commands (controllers)
      config/             contains application configurations
      controllers/        contains Web controller classes
      data/               contains important data generated by different commands
      env/                contains environment-dependent files
      mail/               contains view files for e-mails
      models/             contains model classes
      node_modules/       contains installed NPM packages
      runtime/            contains files generated during runtime
      scripts/            contains shell scripts
      vendor/             contains dependent 3rd-party packages
      views/              contains view files for the Web application
      web/                contains the entry script and Web resources


## DEVELOPMENT

We use grunt to automate the generation of CSS and JavaScript files from source files.
Each time you make changes to LESS or source JavaScript files, you make run `grunt build` to regenerate
the combined/compressed CSS and JavaScript files. Alternatively you may run `grunt watch` once to 
watch the changes to the source files and automatically generate the CSS/JS files when needed.


### Adding a new LESS file

* The new LESS file should be put under `assets/less`. 
* The new file should also be listed in `assets/less/all.less`.
* Usually each controller corresponds to a single LESS file whose name is the same as the controller ID.
  For example, the `GuideController` has a LESS file named `guide.less`.
  
### Adding a new JavaScript file

TBD


